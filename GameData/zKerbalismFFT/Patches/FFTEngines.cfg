//
// Engines radioactivity
//

@PART[fft-antimatter-beam-1]:NEEDS[FeatureRadiation]:AFTER[FarFutureTechnologies]
{
	MODULE
	{
		name = Emitter
		radiation = 60 // rad/s
		@radiation *= #$@KERBALISM_FFT_SETTINGS/FFT_Engines_Radioactivity_Coeff$
	}
	MODULE
	{
		name = FFTRadioactiveEngine
		engineID1 = AntimatterBeam
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine1
		{
			key = 0 0 0 0
			key = 1 20 0 0
			key = 100 100 0 0
		}
		// Minimum possible Emitter radiation (in % of max radiation) after full radiation decay
		MinEmissionPercent = 0.00001
		// Time to lower Emitter radiation by 1%, in seconds, after engine has been stopped
		EmissionDecayRate = 0.1
	}
}
@PART[fft-antimatter-microfission-1]:NEEDS[FeatureRadiation]:AFTER[FarFutureTechnologies]
{
	MODULE
	{
		name = Emitter
		radiation = 0.12 // rad/s
		@radiation *= #$@KERBALISM_FFT_SETTINGS/FFT_Engines_Radioactivity_Coeff$
	}
	MODULE
	{
		name = FFTRadioactiveEngine
		engineID1 = ReactionProducts
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine1
		{
			key = 0 0 0 0
			key = 1 20 0 0
			key = 100 100 0 0
		}
		// Minimum possible Emitter radiation (in % of max radiation) after full radiation decay
		MinEmissionPercent = 0.0001
		// Time to lower Emitter radiation by 1%, in seconds, after engine has been stopped
		EmissionDecayRate = 0.5
	}
}
@PART[fft-antimatter-microfusion-1]:NEEDS[FeatureRadiation]:AFTER[FarFutureTechnologies]
{
	MODULE
	{
		name = Emitter
		radiation = 0.12 // rad/s
		@radiation *= #$@KERBALISM_FFT_SETTINGS/FFT_Engines_Radioactivity_Coeff$
	}
	MODULE
	{
		name = FFTRadioactiveEngine
		engineID1 = AIMReactor
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine1
		{
			key = 0 0 0 0
			key = 1 20 0 0
			key = 100 100 0 0
		}
		// Minimum possible Emitter radiation (in % of max radiation) after full radiation decay
		MinEmissionPercent = 0.0001
		// Time to lower Emitter radiation by 1%, in seconds, after engine has been stopped
		EmissionDecayRate = 0.5
	}
}
@PART[fft-ffre-plasma-1]:NEEDS[FeatureRadiation]:AFTER[FarFutureTechnologies]
{
	MODULE
	{
		name = Emitter
		radiation = 0.04 // rad/s
		@radiation *= #$@KERBALISM_FFT_SETTINGS/FFT_Engines_Radioactivity_Coeff$
	}
	MODULE
	{
		name = FFTRadioactiveEngine
		engineID1 = FissionFragment
		engineID2 = Afterburning
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine1
		{
			key = 0 0 0 0
			key = 1 10 0 0
			key = 100 50 0 0
		}
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine2
		{
			key = 0 0 0 0
			key = 1 20 0 0
			key = 100 100 0 0
		}
		// Minimum possible Emitter radiation (in % of max radiation) after full radiation decay
		MinEmissionPercent = 0.0001
		// Time to lower Emitter radiation by 1%, in seconds, after engine has been stopped
		EmissionDecayRate = 0.5
	}
}
@PART[fft-ffre-solid-1]:NEEDS[FeatureRadiation]:AFTER[FarFutureTechnologies]
{
	MODULE
	{
		name = Emitter
		radiation = 0.02 // rad/s
		@radiation *= #$@KERBALISM_FFT_SETTINGS/FFT_Engines_Radioactivity_Coeff$
	}
	MODULE
	{
		name = FFTRadioactiveEngine
		engineID1 = FissionFragment
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine1
		{
			key = 0 0 0 0
			key = 1 20 0 0
			key = 100 100 0 0
		}
		// Minimum possible Emitter radiation (in % of max radiation) after full radiation decay
		MinEmissionPercent = 0.0001
		// Time to lower Emitter radiation by 1%, in seconds, after engine has been stopped
		EmissionDecayRate = 2
	}
}
@PART[fft-fission-zpinch-1]:NEEDS[FeatureRadiation]:AFTER[FarFutureTechnologies]
{
	MODULE
	{
		name = Emitter
		radiation = 1.2 // rad/s
		@radiation *= #$@KERBALISM_FFT_SETTINGS/FFT_Engines_Radioactivity_Coeff$
	}
	MODULE
	{
		name = FFTRadioactiveEngine
		engineID1 = FissionPulse
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine1
		{
			key = 0 0 0 0
			key = 1 20 0 0
			key = 100 100 0 0
		}
		// Minimum possible Emitter radiation (in % of max radiation) after full radiation decay
		MinEmissionPercent = 0.0001
		// Time to lower Emitter radiation by 1%, in seconds, after engine has been stopped
		EmissionDecayRate = 0.5
	}
}
@PART[fft-nswr-1]:NEEDS[FeatureRadiation]:AFTER[FarFutureTechnologies]
{
	MODULE
	{
		name = Emitter
		radiation = 8 // rad/s
		@radiation *= #$@KERBALISM_FFT_SETTINGS/FFT_Engines_Radioactivity_Coeff$
	}
	MODULE
	{
		name = FFTRadioactiveEngine
		engineID1 = nswr
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine1
		{
			key = 0 0 0 0
			key = 1 20 0 0
			key = 100 100 0 0
		}
		// Minimum possible Emitter radiation (in % of max radiation) after full radiation decay
		MinEmissionPercent = 0.001
		// Time to lower Emitter radiation by 1%, in seconds, after engine has been stopped
		EmissionDecayRate = 10
	}
}
@PART[fft-fusion-axial-zpinch-1]:NEEDS[FeatureRadiation]:AFTER[FarFutureTechnologies]
{
	MODULE
	{
		name = Emitter
		radiation = 20 // rad/s
		@radiation *= #$@KERBALISM_FFT_SETTINGS/FFT_Engines_Radioactivity_Coeff$
	}
	MODULE
	{
		name = FFTRadioactiveEngine
		engineID1 = ReactionProducts
		engineID2 = Afterburner
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine1
		{
			key = 0 0 0 0
			key = 1 10 0 0
			key = 100 50 0 0
		}
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine2
		{
			key = 0 0 0 0
			key = 1 20 0 0
			key = 100 100 0 0
		}
		// Minimum possible Emitter radiation (in % of max radiation) after full radiation decay
		MinEmissionPercent = 0.0001
		// Time to lower Emitter radiation by 1%, in seconds, after engine has been stopped
		EmissionDecayRate = 0.5
	}
}
@PART[fft-fusion-inertial-laser-1]:NEEDS[FeatureRadiation]:AFTER[FarFutureTechnologies]
{
	MODULE
	{
		name = Emitter
		radiation = 0.04 // rad/s
		@radiation *= #$@KERBALISM_FFT_SETTINGS/FFT_Engines_Radioactivity_Coeff$
	}
	MODULE
	{
		name = FFTRadioactiveEngine
		engineID1 = ReactionProducts
		engineID2 = LowDensity
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine1
		{
			key = 0 0 0 0
			key = 1 16 0 0
			key = 100 80 0 0
		}
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine2
		{
			key = 0 0 0 0
			key = 1 20 0 0
			key = 100 100 0 0
		}
		// Minimum possible Emitter radiation (in % of max radiation) after full radiation decay
		MinEmissionPercent = 0.0001
		// Time to lower Emitter radiation by 1%, in seconds, after engine has been stopped
		EmissionDecayRate = 0.5
	}
}
@PART[fft-fusion-inertial-magnetic-1]:NEEDS[FeatureRadiation]:AFTER[FarFutureTechnologies]
{
	MODULE
	{
		name = Emitter
		radiation = 0.1 // rad/s
		@radiation *= #$@KERBALISM_FFT_SETTINGS/FFT_Engines_Radioactivity_Coeff$
	}
	MODULE
	{
		name = FFTRadioactiveEngine
		engineID1 = Deuterium
		engineID2 = D-He3
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine1
		{
			key = 0 0 0 0
			key = 1 20 0 0
			key = 100 100 0 0
		}
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine2
		{
			key = 0 0 0 0
			key = 1 4 0 0
			key = 100 20 0 0
		}
		// Minimum possible Emitter radiation (in % of max radiation) after full radiation decay
		MinEmissionPercent = 0.0001
		// Time to lower Emitter radiation by 1%, in seconds, after engine has been stopped
		EmissionDecayRate = 0.5
	}
}
@PART[fft-fusion-magnetic-mirror-1]:NEEDS[FeatureRadiation]:AFTER[FarFutureTechnologies]
{
	MODULE
	{
		name = Emitter
		radiation = 4 // rad/s
		@radiation *= #$@KERBALISM_FFT_SETTINGS/FFT_Engines_Radioactivity_Coeff$
	}
	MODULE
	{
		name = FFTRadioactiveEngine
		engineID1 = ReactionProducts
		engineID2 = Afterburner
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine1
		{
			key = 0 0 0 0
			key = 1 18 0 0
			key = 100 90 0 0
		}
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine2
		{
			key = 0 0 0 0
			key = 1 20 0 0
			key = 100 100 0 0
		}
		// Minimum possible Emitter radiation (in % of max radiation) after full radiation decay
		MinEmissionPercent = 0.0001
		// Time to lower Emitter radiation by 1%, in seconds, after engine has been stopped
		EmissionDecayRate = 0.5
	}
}
@PART[fft-fusion-magnetic-tokamak-1]:NEEDS[FeatureRadiation]:AFTER[FarFutureTechnologies]
{
	MODULE
	{
		name = Emitter
		radiation = 0.02 // rad/s
		@radiation *= #$@KERBALISM_FFT_SETTINGS/FFT_Engines_Radioactivity_Coeff$
	}
	MODULE
	{
		name = FFTRadioactiveEngine
		engineID1 = LowPower
		engineID2 = HighPower
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine1
		{
			key = 0 0 0 0
			key = 1 16 0 0
			key = 100 80 0 0
		}
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine2
		{
			key = 0 0 0 0
			key = 1 20 0 0
			key = 100 100 0 0
		}
		// Minimum possible Emitter radiation (in % of max radiation) after full radiation decay
		MinEmissionPercent = 0.0001
		// Time to lower Emitter radiation by 1%, in seconds, after engine has been stopped
		EmissionDecayRate = 1
	}
}
@PART[fft-fusion-magnetic-tokamak-aerospike-1]:NEEDS[FeatureRadiation]:AFTER[FarFutureTechnologies]
{
	MODULE
	{
		name = Emitter
		radiation = 0.02 // rad/s
		@radiation *= #$@KERBALISM_FFT_SETTINGS/FFT_Engines_Radioactivity_Coeff$
	}
	MODULE
	{
		name = FFTRadioactiveEngine
		engineID1 = D-He3
		// FloatCurve with values "engine thrust (in % fo MaxThrust) / Emitter radiation (in % of max radiation)"
		EmissionPercentEngine1
		{
			key = 0 0 0 0
			key = 1 20 0 0
			key = 100 100 0 0
		}
		// Minimum possible Emitter radiation (in % of max radiation) after full radiation decay
		MinEmissionPercent = 0.0001
		// Time to lower Emitter radiation by 1%, in seconds, after engine has been stopped
		EmissionDecayRate = 1
	}
}

//
// Engines reliability
//
@PART[fft-*]:HAS[@MODULE[ModuleEngines*]]:NEEDS[FeatureReliability]:AFTER[KerbalismDefault]
{
	@MODULE[Reliability]:HAS[#type[ModuleEngines*]]
	{
		@rated_operation_duration = 0
		@rated_ignitions = 0
		@turnon_failure_probability = 0.001
		@extra_cost = 1.25
		@extra_mass = 0.05
		@repair = Engineer@5
	}
}
